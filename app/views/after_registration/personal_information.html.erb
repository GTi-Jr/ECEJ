<% flash.each do |key, value| %>
<div id="card-alert" class="card orange">
  <div class="card-content white-text">
    <p><i class="mdi-alert-warning"></i> <%= value %></p>
  </div>
  <button type="button" class="close white-text" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">×</span>
  </button>
</div>
<% end %>
<div class="row">
  <div class="col s12">
    <div class="card-panel">
      <h4 class="header2">Dados pessoais</h4>
      <div class="row">
        <%= form_for(@user, :url => wizard_path, :method => :put, :class => 'col s12', :html=> {:id => 'formInfo'}) do |f| %>
        <div class="row">
          <div class="input-field col s12">
            <%= f.text_field :name, :id => 'name', required: true, placeholder: 'Nome completo'%>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <%= f.text_field :general_register, :id => 'rg', :required => true, placeholder: 'Doc. de Identidade'%>
          </div>
          <div class="input-field col s6">
            <%= f.text_field :cpf, :id => 'cpf', :required => true, placeholder: 'CPF'%>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <%= f.text_field :phone, :id =>'phone', :required => true, placeholder: 'Telefone celular'%>
          </div>
          <div class="input-field col s6">
            <%= f.date_field :birthday, :id =>'birthday', :required => true, placeholder: 'Data de nascimento', class: 'datepicker'%>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <div class="select-wrapper initialized"><span class="caret">▼</span>
              <%= f.select :gender, ['Masculino', 'Feminino'], :required => true%>
            </div>
            <label>Gênero</label>
          </div>
          <div class="file-field input-field col s6">
            <input class="file-path validate" type="text">
            <div class="btn">
              <span>Foto</span>
              <%= f.file_field :avatar%>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <%= f.text_area :special_needs, :id => 'special_needs', :class => 'materialize-textarea',:length => '120' %>
            <label for="special_needs">Necessidades especiais</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <%= f.submit 'Próximo', :class => 'btn cyan waves-effect waves-light right'%>
          </div>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
<script>

$("#formInfo").validate({
  rules: {
    name: {
      required: true,
    },
    gender:"required"
  },
  //For custom messages
  messages: {
    name:{
      required: "Preencha com seu nome completo"
    }
  },
  errorElement : 'div',
  errorPlacement: function(error, element) {
    var placement = $(element).data('error');
    if (placement) {
      $(placement).append(error)
    } else {
      error.insertAfter(element);
    }
  }
});

$('#rg').formatter({
  'pattern': '{{99999999999999999}}-{{9}}',
});
$('#cpf').formatter({
  'pattern': '{{999}}.{{999}}.{{999}}-{{99}}',
});
$('#phone').formatter({
  'pattern': '({{99}}){{9}}{{9999}}{{9999}}',
  'persistent': true
});
$('#birthday').formatter({
  'pattern': '{{99}}-{{99}}-{{9999}}',
  'persistent': true
});

$('.datepicker').pickadate({
   selectMonths: true, // Creates a dropdown to control month
   selectYears: 80 // Creates a dropdown of 15 years to control year
 });
</script>
