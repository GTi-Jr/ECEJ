<div class="row">
  <div class="col s12">
    <div class="card-panel">
      <h4 class="header2">Dados pessoais</h4>
      <div class="row">
      <%= form_for(@user, :url => wizard_path, html: { method: :put, id: "form_info", class: 'col s12'}) do |f| %>
       <div class="row">
          <div class="input-field col s12">
            <%= f.text_field :name, id:"name", placeholder: 'Nome completo'%>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <%= f.text_field :general_register, id: "general_register", placeholder: 'Doc. de Identidade'%>
          </div>
          <div class="input-field col s6">
            <%= f.text_field :cpf, :id => 'cpf', placeholder: 'CPF'%>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <%= f.text_field :phone, :id =>'phone', placeholder: 'Telefone celular'%>
          </div>
          <div class="input-field col s6">
            <%= f.text_field :birthday, :id =>'birthday', placeholder: 'Data de nascimento', class: 'datepicker'%>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <div class="select-wrapper initialized"><span class="caret">▼</span>
              <%= f.select :gender, ['Masculino', 'Feminino']%>
            </div>
            <label>Gênero</label>
          </div>
          <div class="file-field input-field col s6">
            <div class="btn">
              <span>File</span>
              <%= f.file_field :avatar %>
            </div>
            <div class="file-path-wrapper">
              <input class="file-path" type="text" disabled="true">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <%= f.text_area :special_needs, :id => 'special_needs', :class => 'materialize-textarea', placeholder: "Necessidades especiais"%>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <%= button_tag(class: 'btn cyan waves-effect waves-light right') do %>
              Próximo
            <% end %>
          </div>
          <div class="col s12 center-align">
            <span class="chip">1/3</span>
          </div>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  $('.datepicker').pickadate({
    format: 'dd/mm/yyyy',
    formatSubmit: 'yyyy-mm-dd',
    selectYears: 80,
    max: true
  });
  $('#cpf').formatter({
          'pattern': '{{999}}.{{999}}.{{999}}-{{99}}',
  });
  $('#phone').formatter({
          'pattern': '+55 ({{99}}) {{99999}} {{9999}}',
  });
  $("#form_info").validate({
    submitHandler: function(form) {
    $(form).ajaxSubmit();
  },
     errorElement : 'div',
     errorPlacement: function(error, element) {
       var placement = $(element).data('error');
       if (placement) {
         $(placement).append(error)
       } else {
         error.insertAfter(element);
       }
     }
   });
   $( "#name" ).rules( "add", {
     required: true,
     messages: {
       required: "Preencha com nome completo"
     }
   });
   $( "#general_register" ).rules( "add", {
     required: true,
     digits: true,
     messages: {
       required: "Entre com seu número de identidade",
       digits: "Preencha esse campo apenas com números"
     }
   });
   $( "#cpf" ).rules( "add", {
     required: true,
     rangelength: [11,14],
     messages: {
       required: "Entre com seu cpf",
       rangelength: "O CPF deve possuir 11 dígitos"
     }
   });
   $( "#phone" ).rules( "add", {
     required: true,
     messages: {
       required: "Entre com seu número de celular"
     }
   });
</script>
