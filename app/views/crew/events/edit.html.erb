<div id="" class="row">
  <div class="col s12 z-depth-4 card-panel">
    <%= form_for @event, url: {action: "update"}, html: { multipart: true }, method: :patch do |f| %>
      <div class="row">
        <div class="input-field col s12 center">
          <p class="center login-form-text">Cadastro de evento</p>
        </div>
      </div>

      <div class="row">
        <div class="input-field col s12 center">
          <% if @event.errors.any? %>
            <ul>
              <% @event.errors.full_messages.each do |error| %>
                <li><%= error %></li>
              <% end %>
            </ul>
          <% end %>
        </div>
      </div>

      <div class="row margin">
        <div class="col s12 m6 l4">
          <%= f.label :name, "Nome", class: "center-align" %>
          <%= f.text_field :name, id: 'name' %>
        </div>

        <div class="col s12 m6 l4">
          <%= f.label :facilitator, "Facilitador", class: "center-align" %>
          <%= f.text_field :facilitator, id: 'facilitator' %>
        </div>

        <div class="col s12 m6 l4">
          <%= f.label :facilitator_image, "Foto do facilitator", class: "center-align" %>
          <%= f.file_field :facilitator_image, id: 'facilitator_image' %>
          <p>
            Imagem atual:
            <% if @event.facilitator_image.present? %>
              <%= image_tag @event.facilitator_image.thumb %>
            <% else %>
              Nenhuma imagem presente.
            <% end %>
          </p>
        </div>

        <div class="col s12 m12 l12">
          <%= f.label :description, "Descrição", class: "center-align" %>
          <%= f.text_area :description, id: 'description' %>
        </div>

        <div class="col s12 m6 l4 ">
          <%= f.label :limit, "Limite", class: "center-align" %>
          <%= f.number_field :limit, id: 'limit' %>
        </div>

        <div class="col s12 m6 l4">
          <%= f.label :start, "Início", class: "center-align", autofocus: true %>
          <br />
          <%= f.datetime_local_field :start, id: 'start' %>
        </div>

        <div class="col s12 m6 l4">
          <%= f.label :end, "Término", class: "center-align", autofocus: true %>
          <br />
          <%= f.datetime_local_field :end, id: 'end' %>
        </div>

        <div class="input-field col s12 m6 l4">
          <%= f.submit "Cadastrar", class: 'btn waves-effect waves-light light-blue darken-1 col s12' %>
        </div>
      </div>
    <% end %>
  </div>
</div>

<div>
  <h4 class="header center">Pessoas no evento</h4>
  <div class="row">
    <% if @users.empty? %>
      <div class="col s12 center">
        <span class="red-text">Nenhuma pessoa neste evento</span>
      </div>
    <% else %>
      <div class="col s12">
        <div class="center">
          <table id="users_table" class="highlight">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Email</th>
                <th>EJ</th>
                <th>Ações</th>
              </tr>
            </thead>

            <tbody>
              <% @users.each do |user, payment| %>
                <tr class="<%= "left-red-border" if !user.active %>">
                  <td><%= user.name %></td>
                  <td><%= user.email %></td>
                  <td><%= user.junior_enterprise %></td>
                  <td><%= link_to 'Remover do evento', crew_remove_event_user_path(@event.id, user.id), method: :delete %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  <% end %>
</div>
